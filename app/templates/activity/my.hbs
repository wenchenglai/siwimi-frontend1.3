<div class="row row-gutter-top">
    <div class="col-xs-12">
        <ol class="breadcrumb">
            <li>{{#link-to 'index' class="btn-link"}}Home{{/link-to}}</li>
            <li><button class="btn-link" {{action "goBack"}}>Events</button></li>
            <li class="active">My Events</li>
        </ol>
    </div>
</div>

<div class="row row-gutter-bottom">
    <div class="col-xs-8">

        {{#link-to 'activity.new' class="btn btn-cys-new"}}Add New Event{{/link-to}}
        {{#link-to 'activity.submit' class="btn btn-cys-new"}}Submit Event{{/link-to}}
        <h1>My Events</h1>
    </div>
</div>

<div class="row row-gutter-bottom">
    <div class="col-xs-12">
        {{#link-to 'activity.my' (query-params action="1")}}Upcoming events{{/link-to}} |
        {{#link-to 'activity.my' (query-params action="2")}}Thinking about it{{/link-to}} |
        {{#link-to 'activity.my' (query-params action="1")}}Past events{{/link-to}} |
        {{#link-to 'activity.my' (query-params creator=session.secure.id)}}Events I've created{{/link-to}}

    </div>
</div>


{{#if model}}



    <div class="row row-gutter-bottom">
        <div class="col-xs-12">
            {{#single-select group="type" btnClassName="btn btn-cys" selectedValue=type value="all"}}
                All
            {{/single-select}}

            {{#single-select group="type" btnClassName="btn btn-cys" selectedValue=type value="birthday"}}
                Birthdays
            {{/single-select}}

            {{#single-select group="type" btnClassName="btn btn-cys" selectedValue=type value="concert"}}
                Concerts
            {{/single-select}}

            {{#single-select group="type" btnClassName="btn btn-cys" selectedValue=type value="farm"}}
                Farm Activity
            {{/single-select}}

            {{#single-select group="type" btnClassName="btn btn-cys" selectedValue=type value="storytelling"}}
                Storytelling
            {{/single-select}}

            {{#single-select group="type" btnClassName="btn btn-cys" selectedValue=type value="movie"}}
                Movies
            {{/single-select}}

            {{#single-select group="type" btnClassName="btn btn-cys" selectedValue=type value="museum"}}
                Museums
            {{/single-select}}

            {{#single-select group="type" btnClassName="btn btn-cys" selectedValue=type value="playdate"}}
                Play Dates
            {{/single-select}}

            {{#single-select group="type" btnClassName="btn btn-cys" selectedValue=type value="festival"}}
                Festival
            {{/single-select}}

            {{#single-select group="type" btnClassName="btn btn-cys" selectedValue=type value="show"}}
                Shows
            {{/single-select}}

            {{#single-select group="type" btnClassName="btn btn-cys" selectedValue=type value="sport"}}
                Sports
            {{/single-select}}

            {{#single-select group="type" btnClassName="btn btn-cys" selectedValue=type value="misc"}}
                Misc
            {{/single-select}}
        </div>
    </div>

    <div class="row row-gutter-bottom">
        <div class="col-xs-12">
            {{#single-select group="status" btnClassName="btn-cys-secondary" selectedValue=status value="all"}}
                All
            {{/single-select}}

            {{#single-select group="status" btnClassName="btn-cys-secondary" selectedValue=status value="current"}}
                Current
            {{/single-select}}

            {{#single-select group="status" btnClassName="btn-cys-secondary" selectedValue=status value="upcoming"}}
                Upcoming
            {{/single-select}}

            {{#single-select group="status" btnClassName="btn-cys-secondary" selectedValue=status value="past"}}
                Past
            {{/single-select}}

            {{#single-select group="status" btnClassName="btn-cys-secondary" selectedValue=status value="timeless"}}
                Timeless
            {{/single-select}}
        </div>
    </div>

    <div class="row row-gutter-bottom">
        <div class="col-xs-12">
            <table class="table table-hover">
                <thead>
                    <th></th>
                    <th>Title</th>
                    <th>Type</th>
                    <th>From</th>
                    <th>Age</th>
                    <th>Location</th>
                    <th>Parser</th>
                    <th>CustomData</th>
                    <th></th>
                </thead>
                <tbody>
                    {{#each model as |activity|}}
                    <tr>
                        <td>
                            {{#link-to 'activity.show' activity.id}}
                                {{preview-image width="80" height="80" class="img-responsive img-thumbnail" src=activity.availableImage}}
                            {{/link-to}}
                        </td>
                        <td>{{shorten-string activity.title}}</td>
                        <td>{{display-text activity.type allTypes}}</td>
                        <td>{{formatted-date activity.fromDate 'l'}}</td>
                        <td>{{activity.fromAge}}-{{activity.toAge}}</td>
                        <td>{{activity.cityState}}</td>
                        <td>{{shorten-string activity.parser}}</td>
                        <td>{{shorten-string activity.customData}}</td>
                        <td>
                            <div class="btn-group" role="group" aria-label="...">
                                {{#link-to 'activity.edit' activity class="btn btn-default"}}Edit{{/link-to}}
                                <button type="button" class="btn btn-default" {{action 'openDeleteDialog' activity.id target="view" bubbles="false" }}>Delete</button>
                            </div>
                        </td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>

    <div class="row row-gutter-bottom">
        <div class="col-xs-12 col-md-11">
            <nav>
                <ul class="pagination">
                    <li class={{isLeftArrowDisabled}}>
                        <a {{action "loadPrevPage"}} aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    {{#each page in pages}}
                        <li class={{page.className}}><a {{action "loadByPageNumber" page.text}}>{{page.text}}</a></li>
                    {{/each}}
                    <li class={{isRightArrowDisabled}}>
                        <a {{action "loadNextPage"}} aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="col-xs-12 col-md-1">
            <nav>
                <div class="pagination">
                    {{view "select" class="btn-cys-inverse dropdown-toggle" content=allPageSizes value=decoratedPageSize}}
                </div>
            </nav>
        </div>
    </div>

{{else}}
    <p class="lead">There is no events from the current search.</p>
{{/if}}

{{delete-confirm}}


