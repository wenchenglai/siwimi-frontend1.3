<div class="row row-gutter-bottom row-gutter-top">
    <div class="col-xs-12">
        <!--/*
          *
          * Revive Adserver Asynchronous JS Tag
          * - Generated with Revive Adserver v3.2.2
          *
          */-->

        <ins data-revive-zoneid="3" data-revive-matchcontent="1" data-revive-id="117dadc085810cb156b98c91b758833b"></ins>
        <script async src="//www.adrelevantis.com/revive/www/delivery/asyncjs.php"></script>
    </div>
</div>

<div class="row row-gutter-bottom row-gutter-top">
    <div class="col-xs-12">
        <!--/*
          *
          * Revive Adserver Asynchronous JS Tag
          * - Generated with Revive Adserver v3.2.2
          *
          */-->

        <ins data-revive-zoneid="3" data-revive-matchcontent="1" data-revive-id="117dadc085810cb156b98c91b758833b"></ins>
        <script async src="//www.adrelevantis.com/revive/www/delivery/asyncfnjs.php"></script>
    </div>
</div>

<div class="row row-gutter-bottom row-gutter-top">
    <div class="col-xs-12 col-md-6">
        <ol class="breadcrumb">
            <li>{{#link-to 'index'}}Home{{/link-to}}</li>
            <li><button class="btn-link" {{action "goBack"}}>Tips</button></li>
            <li class="active">Detail</li>
        </ol>
    </div>
    <div class="col-xs-12 col-md-6">
        {{#if showEdit}}
            {{#link-to 'tip.edit' model.tip class="btn btn-default"}}Edit{{/link-to}}
        {{/if}}
    </div>
</div>

<div class="row row-gutter-bottom">
    <div class="col-xs-12">
        <h3>{{ model.tip.title }}</h3>
        <hr style="border-width:4px" />
    </div>
</div>
<div class="row row-gutter-bottom">
    <div class="col-xs-1">
        {{#link-to 'member.show' model.tip.creator}}
            <img class="avatar" src={{model.tip.creator.availableImage}} width="100" height="100" class="img-responsive img-rounded">
        {{/link-to}}

        <a class="vote-up" {{action "voteUp" }} title="it's userful and clear'">test</a>
        <span class="vote-count-post">{{model.tip.voteCount}}</span>
        <a class="vote-down" {{action "voteDown" }} title="it's userful and clear'">test</a>
        <a class={{model.tip.isFavorite:star-on:star-off}} href="#" {{action "setFavorite" }} title="This is a favorite question (click again to undo)">favorite</a>
    </div>

    <div class="col-xs-11">
        <div class="row row-gutter-bottom">
            <div class="col-xs-12">
                by <strong>{{#link-to 'member.show' model.tip.creator}}{{model.tip.creator.displayName}}{{/link-to}}</strong> on <span>{{formatted-date model.tip.createdDate 'LL'}}</span>
            </div>
        </div>
        <div class="row row-gutter-bottom">
            <div class="col-xs-2">
                <div style="min-height:100px">
                    {{preview-image width="300" height="300" class="img-responsive img-thumbnail" src=model.tip.availableImage}}
                </div>
            </div>
            <div class="col-xs-10">
                <div style="min-height:100px">
                    {{{model.tip.description}}}
                </div>
                {{#if model.tip.url}}
                    <div>
                        <label>Link:</label>
                        <a href={{model.tip.url}} target="_blank" alt="original link">{{shorten-string model.tip.url 30}}</a>
                    </div>
                {{/if}}
            </div>
        </div>
        <div class="row row-gutter-bottom">
            {{#if model.tip.type}}
                <div class="col-sm-2">
                    <label>Type:</label>
                    {{display-text model.tip.type allTypes}}
                </div>
            {{/if}}

            {{#if model.tip.isGeoNeeded }}
                <div class="col-sm-2">
                    <label>Location:</label>
                    {{model.tip.cityState}}
                </div>
            {{/if}}

            {{#if model.tip.expiredDate}}
                <div class="col-sm-2">
                    <label>Expired:</label>
                    {{formatted-date model.tip.expiredDate 'LL'}}
                </div>
            {{/if}}

            {{#if model.feedback.length}}
                <div class="col-sm-2">
                    <label>Comments:</label>
                    {{model.feedback.length}}
                </div>
            {{/if}}

            {{#if model.tip.viewCount}}
                <div class="col-sm-2">
                    <label>Views:</label>
                    {{model.tip.viewCount}}
                </div>
            {{/if}}

        </div>
    </div>
</div>


{{#each fb in model.feedbacks}}
<div class="row row-gutter-bottom">
    <div class="col-xs-12">
        <hr style="border-width:4px" />
    </div>
</div>
<div class="row row-gutter-bottom">
    <div class="col-xs-1">
        {{#link-to 'member.show' fb.creator}}
            <img class="avatar" src={{fb.creator.availableImage}}>
        {{/link-to}}
    </div>
    <div class="col-xs-11">
        <div class="row row-gutter-bottom">
            <div class="col-xs-12">
                {{fb.description}}
            </div>
        </div>
    </div>
</div>
{{/each}}

{{#if session.isAuthenticated}}
    <div class="row row-gutter-bottom">
        <div class="col-xs-12">
            <label>
                Post your comments:
            </label>
            {{textarea class="form-control" placeholder="review" rows="5" cols="60" value=newFeedbackText}}
        </div>
        <div class="col-xs-12">
            <button class="btn btn-cys" {{action "addNewFeedback" model.tip.id }}>Reply</button>
        </div>
    </div>
{{else}}
    <div class="row row-gutter-bottom">
        <div class="col-xs-12">
            <button class="btn btn-cys" {{action "addNewFeedback" model.tip.id }}>Reply</button>
        </div>
    </div>
{{/if}}